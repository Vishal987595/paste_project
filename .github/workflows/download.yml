name: Add Results to Repository

on:
  workflow_run:
    workflows: [Java CI with Maven]
    types:
      - completed

jobs:
  add_results:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Copy Results Directory
        run: |
          # Create a copy of the "results" directory
          cp -r results $GITHUB_WORKSPACE/results_copy
        working-directory: $GITHUB_WORKSPACE

      - name: Commit and Push Results Directory
        run: |
          git config --local user.email "vishal.ghoniya@iitgn.ac.in"
          git config --local user.name "Vishal 987595"

          # Add and commit the "results_copy" directory
          git add results_copy
          git commit -m "Add 'results' directory"
          git push
        working-directory: $GITHUB_WORKSPACE

